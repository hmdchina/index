<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>正在连接服务器...</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;background:linear-gradient(135deg,#f5f7fa 0%,#e4e8ec 100%);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px;position:relative}body::before{content:'';position:absolute;top:0;left:0;right:0;height:40%;background:linear-gradient(135deg,#EF3C34 0%,#ff6b6b 100%);border-radius:0 0 50% 50%/0 0 100px 100px}.a{background:#fff;border-radius:16px;padding:40px;max-width:500px;width:100%;box-shadow:0 10px 40px rgba(0,0,0,.1);position:relative;z-index:1}.b{text-align:center;margin-bottom:30px}.b svg{width:80px;height:80px;margin-bottom:16px}.b h1{font-size:24px;color:#222;margin-bottom:8px}.b p{color:#666;font-size:14px}.c{text-align:center;margin-bottom:30px}.d{width:50px;height:50px;border:4px solid #f3f3f3;border-top:4px solid #EF3C34;border-radius:50%;animation:e 1s linear infinite;margin:0 auto 20px}@keyframes e{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.f{font-size:16px;color:#333;margin-bottom:10px}.g{font-size:13px;color:#888}.h{margin-top:20px;border-top:1px solid #eee;padding-top:20px}.i{display:flex;align-items:center;justify-content:space-between;padding:10px 0;border-bottom:1px solid #f5f5f5;font-size:13px}.i:last-child{border-bottom:none}.i .j{color:#333;flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-right:10px}.i .k{font-weight:500;min-width:80px;text-align:right}.i .k.l{color:#4caf50}.i .k.m{color:#f44336}.i .k.n{color:#ff9800}.i .k.o{color:#EF3C34;font-weight:700}.p{background:#fff3f3;border:1px solid #ffcdd2;border-radius:8px;padding:20px;margin-top:20px;display:none}.p h3{color:#c62828;font-size:16px;margin-bottom:10px}.p p{color:#666;font-size:13px;line-height:1.6}.q{margin-top:15px;padding:10px 30px;background:#EF3C34;color:#fff;border:none;border-radius:8px;font-size:14px;cursor:pointer;transition:background .3s}.q:hover{background:#C62828}.r{display:none!important}</style></head><body><div class="a"><div class="b"><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="lg" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#EF3C34"/><stop offset="100%" style="stop-color:#C62828"/></linearGradient></defs><rect x="0" y="0" width="40" height="100" rx="4" fill="url(#lg)"/><rect x="60" y="0" width="40" height="100" rx="4" fill="url(#lg)"/><rect x="0" y="35" width="100" height="30" rx="4" fill="url(#lg)"/><rect x="35" y="0" width="30" height="35" fill="#fff"/><rect x="35" y="65" width="30" height="35" fill="#fff"/></svg><h1>惠民达</h1><p>正在为您选择最佳服务器</p></div><div class="c" id="_0"><div class="d" id="_1"></div><div class="f" id="_2">正在连接...</div><div class="g" id="_3">请稍候</div></div><div class="h" id="_4"></div><div class="p" id="_5"><h3>连接失败</h3><p id="_6">无法连接到服务器，请检查网络后重试。</p><button class="q" onclick="_A()">重新连接</button></div></div><script>var _C=JSON.parse(atob('eyJkbnNUeHREb21haW4iOiJwcm9kLmppemh4Zi5jb20iLCJlbnRyeVBhdGgiOiIvYXBpL2hlYWx0aC9pbmZvIiwiYWVzS2V5QmFzZTY0IjoiN3FuYXg3RVktRUdMSkdXV3Bub1o2QTQtYXgzZVRxcEdFanVZa2M3NHFCMCIsImRvaEVuZHBvaW50cyI6WyJodHRwczovL2Rucy5hbGlkbnMuY29tL3Jlc29sdmUiLCJodHRwczovL2Nsb3VkZmxhcmUtZG5zLmNvbS9kbnMtcXVlcnkiXSwic3BlZWRUZXN0VGltZW91dE1zIjo1MDAwfQ==')),_=function(a){return document.getElementById(a)},_G=function(){var p=new URLSearchParams(window.location.search);return{dnsTxtDomain:p.get('domain')||_C.dnsTxtDomain,entryPath:p.get('entry')||_C.entryPath,aesKeyBase64:p.get('key')||_C.aesKeyBase64,dohEndpoints:_C.dohEndpoints,speedTestTimeoutMs:_C.speedTestTimeoutMs}},_b=function(a){var b=a.replace(/-/g,'+').replace(/_/g,'/');return b+='='.repeat((4-b.length%4)%4),Uint8Array.from(atob(b),function(c){return c.charCodeAt(0)})},_c=async function(a,b){try{var c=_b(b),d=_b(a);if(d.length<28)throw 0;var e=d.slice(0,12),f=d.slice(12),g=await crypto.subtle.importKey('raw',c,{name:'AES-GCM'},!1,['decrypt']);return new TextDecoder().decode(await crypto.subtle.decrypt({name:'AES-GCM',iv:e},g,f))}catch(h){return''}},_d=async function(a,b){var c=b.map(async function(d){try{var e=d+'?name='+encodeURIComponent(a)+'&type=TXT',f=await fetch(e,{headers:{accept:'application/dns-json'}});if(!f.ok)throw 0;var g=await f.json(),h=(g.Answer||[]).filter(function(i){return i.type===16}).map(function(i){return i.data.replace(/^"|"$/g,'')});if(!h.length)throw 0;return h.join(',')}catch(i){return null}});var j=c.map(async function(d){var e=await d;return e?e:new Promise(function(){})}),k=new Promise(function(d){setTimeout(function(){return d('')},8e3)});try{return await Promise.race([...j,k])}catch(l){return''}},_e=async function(a,b){var c=Array.from(a.matchAll(/ENC\(([^)]+)\)/g)),d=a;if(c.length&&b){var e=[];for(var f of c){var g=f[1].replace(/['"]/g,'').trim(),h=await _c(g,b);h&&e.push(h)}d=e.join(',')}return[...new Set(d.trim().split(/[\s,]+/g).map(function(i){return i.replace(/['"]/g,'').trim()}).filter(Boolean).map(function(i){return i.startsWith('http')?i:'https://'+i}).map(function(i){return i.replace(/\/+$/,'')}).filter(function(i){try{var j=new URL(i);return j.protocol==='http:'||j.protocol==='https:'}catch(k){return!1}}))]},_f=async function(a,b,c){var d=a+b,e=new AbortController,f=Date.now(),g=setTimeout(function(){return e.abort()},c);try{var h=d+(d.includes('?')?'&':'?')+'ts='+f,i=await fetch(h,{method:'GET',signal:e.signal,mode:'cors'});clearTimeout(g);var j=Date.now()-f;return{ok:i.ok,origin:a,durationMs:j}}catch(k){return clearTimeout(g),{ok:!1,origin:a,durationMs:1/0,error:k.message}}},_g=function(a,b){_('_2').textContent=a,_('_3').textContent=b||''},_h=function(a){_('_1').classList.add('r'),_('_5').style.display='block',_('_6').textContent=a},_i=function(){_('_1').classList.remove('r'),_('_5').style.display='none'},_j=function(a,b,c){var d=_('_4'),e=document.querySelector('[data-origin="'+CSS.escape(a)+'"]'),f='n',g='测速中...';b==='success'?(f='l',g=c+'ms'):b==='error'?(f='m',g='失败'):b==='best'&&(f='o',g=c+'ms ★');if(e)e.querySelector('.k').className='k '+f,e.querySelector('.k').textContent=g;else{var h=document.createElement('div');h.className='i',h.setAttribute('data-origin',a),h.innerHTML='<span class="j">'+a+'</span><span class="k '+f+'">'+g+'</span>',d.appendChild(h)}},_k=function(){_('_4').innerHTML=''},_A=async function(){_i(),_k();var a=_G();_g('正在获取服务器列表...');var b=await _d(a.dnsTxtDomain,a.dohEndpoints);if(!b)return _h('网络连接异常，请检查网络设置后重试');_g('正在解析服务器...');var c=await _e(b,a.aesKeyBase64);if(!c.length)return _h('暂时无法获取服务器信息，请稍后重试');_g('正在选择最佳线路...','共 '+c.length+' 个服务器');var d=await Promise.all(c.map(function(f){return _f(f,a.entryPath,a.speedTestTimeoutMs)})),e=d.filter(function(f){return f.ok}).sort(function(f,g){return f.durationMs-g.durationMs})[0];if(!e){d.forEach(function(f){return _j(f.origin,'error')});return _h('服务器暂时不可用，请稍后重试')}_g('连接成功！','正在跳转...'),_('_1').style.borderTopColor='#4caf50',setTimeout(function(){window.location.href=e.origin},1e3)};document.addEventListener('DOMContentLoaded',function(){_A()})</script></body></html>
